"use strict";var _statcounter=function(M){if(Array.from([1],function(e){return e*2})[0]!==2){var j=document.createElement("iframe");document.documentElement.appendChild(j),Array.from=j.contentWindow.Array.from,document.documentElement.removeChild(j)}var u={EventType:{DomContentLoaded:0,Load:1,FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Custom:5},IncrementalSource:{Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},MouseInteractions:{MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchMove_Departed:8,TouchEnd:9}};try{var O=_statcounter.get_top_window()}catch(e){var O=window.top}var m=O.document,x={};if(typeof M!="undefined"){if(M.start_recording)return M;M.record_pageview?x=M:x._pageview_tags_in=M}var h,c=[],_=!1,T=!1,z=1e3,E=!1,R=!1,I=!1,K=!1,D=!1;function Q(e){var t=!0;return _statcounter.getSessionConfig("sc_unmask_"+e)==1&&(t=!1),{emit:ue,maskAllInputs:t,slimDOMOptions:"all",blockClass:"session-replay-block",recordDOM:!b.includes("off"),triangulateClicks:L&&!L.includes("off"),recordCanvas:[3696903,12501972].includes(e),inlineStylesheet:![12344669].includes(e),keepIframeSrcFn:function(s){try{var i=new URL(s);return i.host.indexOf("youtube.")!==-1||i.host.replace(/^www\./,"")==="youtu.be"}catch(f){return!1}},userTriggeredOnInput:!0}}var p={},J={},W={},N={},A={},F=1,H=Math.pow(2,23)/8,ne=Math.pow(2,19)/8,g=!1,b="on",L="off",w=!1,V=!1;x.start_recording=function(e,t,s,i){if(b=t,i!==void 0&&(L=i),s!==void 0&&(V=s),e!==void 0){if(g!==!1){g===e||console.warning("Blocked recording of project p"+e+" as Statcounter is already recording this page as part of p"+g+" (recording multiple projects at the same time is not supported)");return}g=e}else{if(typeof sc_project=="undefined")return;g=sc_project}_statcounter._rrwebRecord(Q(g)),w=!0,b.includes("off")||X()};function Y(e){if(!T)try{E||(e.project=g,e.visitor=R.replace(/^\./,""),e.session=I,e.href=O.location.href,e.width=_statcounter._rrwebRecord.getWindowWidth(),e.height=_statcounter._rrwebRecord.getWindowHeight(),e.scroll=_statcounter._rrwebRecord.getWindowScroll(O));var t=JSON.stringify(e);if(t.length>H)for(var s=(Math.random()*16777215<<0).toString(16),i=Math.ceil(t.length/H),f=Math.ceil(t.length/i),a=0;a<i;a++){var o=t.substring(f*a,f*(a+1));h.send("part:"+s+":"+(a+1)+":"+i+":"+o)}else h.send(t);E=!0,z=1e3}catch(y){c===!1&&(c=[]),c.push(e),E=!1}}function Z(){_===!1&&(T||h&&h.readyState===WebSocket.OPEN||(c===!1&&(c=[]),h=null,setTimeout(X,z),z*=1.5))}function X(){if(!T){try{b=="dev"||b.indexOf("wsdev")!==-1?h=new WebSocket("wss://dev.statcounter.io/"):h=new WebSocket("wss://statcounter.io/")}catch(e){Z();return}E=!1,h.onclose=Z,h.onopen=function(){for(h.onmessage=oe;c.length;)Y(c.shift());c=!1,_=!1}}}function oe(e){var t=JSON.parse(e.data),s=!1;if(t.payload&&t.payload.required?s=t.payload.required:t.required&&(s=t.required),t.type=="rrweb-DOM-request"){for(var i=[],f=0,a=0;a<s.length;a++){var o=s[a],y=[o,J[o],p[o]];W[o]>H/2?q("DOM-response",{content:[y]}):(i.push(y),f+=W[o]),(f>H/2||a==s.length-1)&&(i.length&&q("DOM-response",{content:i}),f=0,i=[])}p={},J={},W={}}t.type=="hangup"&&(T=!0,ee())}function ee(){w&&(_statcounter._rrwebRecord.stop(),w=!1,delete _statcounter._rrwebRecord),C&&clearTimeout(C),c=[],h&&h.close()}function q(e,t){if(!T)return e===!1||(t.type!==void 0?t.type==2&&e=="pageload"||(t.dupe_type=e):t.type=e),I===!1&&(I=_statcounter.get_session_num(g),R=_statcounter.get_visitor_id(),K=_statcounter.get_tab_session()),t.tab=K,_=="reactivate"&&t.type==4?(t.data.referrer="session-increment",c.length&&(t.timestamp=c[0].timestamp-2),c.unshift(t)):_=="reactivate"&&e=="pageload"&&c[0].type==4?(c.length>1&&(t.timestamp=c[1].timestamp-1),c.splice(1,0,t),_="sending",X()):c===!1&&_===!1?Y(t):(c===!1&&(c=[]),c.push(t)),t}function he(e){console.log(JSON.stringify(e,null,4))}function le(e,t){var s,i,f,a,o,y,v,l,n,d;for(s=e.length&3,i=e.length-s,f=t,o=3432918353,v=461845907,d=0;d<i;)n=e.charCodeAt(d)&255|(e.charCodeAt(++d)&255)<<8|(e.charCodeAt(++d)&255)<<16|(e.charCodeAt(++d)&255)<<24,++d,n=(n&65535)*o+(((n>>>16)*o&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(n&65535)*v+(((n>>>16)*v&65535)<<16)&4294967295,f^=n,f=f<<13|f>>>19,a=(f&65535)*5+(((f>>>16)*5&65535)<<16)&4294967295,f=(a&65535)+27492+(((a>>>16)+58964&65535)<<16);switch(n=0,s){case 3:n^=(e.charCodeAt(d+2)&255)<<16;case 2:n^=(e.charCodeAt(d+1)&255)<<8;case 1:n^=e.charCodeAt(d)&255,n=(n&65535)*o+(((n>>>16)*o&65535)<<16)&4294967295,n=n<<15|n>>>17,n=(n&65535)*v+(((n>>>16)*v&65535)<<16)&4294967295,f^=n}return f^=e.length,f^=f>>>16,f=(f&65535)*2246822507+(((f>>>16)*2246822507&65535)<<16)&4294967295,f^=f>>>13,f=(f&65535)*3266489909+(((f>>>16)*3266489909&65535)<<16)&4294967295,f^=f>>>16,f>>>0}function $(e,t,s){if(e.id?e.id==F?(delete e.id,F++):(console.log("error id mismatch"),e.unexpected_id=!0,e.visitor=R,e.session=I,e.recorder_version="3b5289-1d4f585f09963c2dad8bb7573b8e4540adbe7edf",e.id_class_counts=s!==void 0,e.dupe_ids=JSON.stringify(A),F=parseInt(e.id)+1):s===void 0&&(e.missing_id=!0),e.attributes&&(e.attributes=Object.keys(e.attributes).sort().reduce(function(n,d){return n[d]=e.attributes[d],n},{})),e.childNodes&&Object.keys(e.childNodes).length==0&&e.type==2)delete e.childNodes;else if(e.childNodes)for(var i=0;i<e.childNodes.length;i++){var f=e.childNodes[i];typeof f!="string"&&(e.childNodes[i]=$(f,e,s))}var a=null;if(e.attributes&&Object.keys(e.attributes).length==0&&e.type==2)delete e.attributes;else if(e.attributes){if(e.attributes.id){if(a="#"+e.attributes.id,a.match(/^#(block-)?yui_/)){var o=a.split("_");o.length>2&&o[o.length-2].match(/^[0-9]{13}$/)&&(a=o.slice(0,o.length-2).join("_")+"_"+o[o.length-1])}}else if(s!==void 0&&e.attributes.class){for(var y=e.attributes.class.split(" "),i=0;i<y.length;i++)if(s[y[i]]==1){a="."+y[i];break}}}if(e.type==2&&e.tagName&&delete e.type,a&&p[a]!==void 0&&JSON.stringify(p[a])!=JSON.stringify(e)){for(var i=0;i<N[a].length;i++)for(var v=0;v<N[a][i].childNodes.length;v++)N[a][i].childNodes[v]==a&&(N[a][i].childNodes[v]=p[a]);delete p[a],A[a]=!0}var l=!1;return a&&A[a]===void 0?(p[a]!==void 0&&JSON.stringify(p[a])==JSON.stringify(e)?N[a].push(t):N[a]=[t],l=a):e.tagName=="head"&&t.tagName=="html"?l=e.tagName+"://"+m.location.host+m.location.pathname:e.tagName=="body"&&t.tagName=="html"?l=e.tagName:e.attributes&&e.attributes._cssText&&e.attributes._originalHref?l=e.attributes._originalHref:e.tagName=="style"&&t.tagName=="head"&&(t._style_fragment_nth||(t._style_fragment_nth=1),l="head>style:nth-of-type("+t._style_fragment_nth+++")"),l?(s===void 0&&e.childNodes&&e.childNodes.length&&JSON.stringify(e).length>ne&&(e=ce(e,t)),p[l]=e,l):e.type==3&&e.textContent&&Object.keys(e).length==2?e.textContent:e}function ce(e,t){var s={};te(e,s);for(var i=0;i<e.childNodes.length;i++){var f=e.childNodes[i];typeof f!="string"&&(e.childNodes[i]=$(f,e,s))}return e}function te(e,t){for(var s=0;s<e.childNodes.length;s++){var i=e.childNodes[s];if(i.attributes&&i.attributes.class)for(var f=i.attributes.class.split(/\s+/),a=0;a<f.length;a++)t[f[a]]===void 0&&(t[f[a]]=m.getElementsByClassName(f[a]).length);i.childNodes&&i.childNodes.length&&te(i,t)}}var C=!1,G=new Date().getTime()/1e3,re=new Date().getTime()/1e3;function ue(r){var t=r.type==u.EventType.IncrementalSnapshot&&r.data.userTriggered!==!1&&(r.data.source==u.IncrementalSource.MouseMove||r.data.source==u.IncrementalSource.MouseInteraction&&(r.data.type==u.MouseInteractions.MouseDown||r.data.type==u.MouseInteractions.Click||r.data.type==u.MouseInteractions.DblClick||r.data.type==u.MouseInteractions.TouchStart)||r.data.source==u.IncrementalSource.Scroll||r.data.source==u.IncrementalSource.Input||r.data.source==u.IncrementalSource.TouchMove),s=new Date().getTime()/1e3;if(t&&_===!1&&s-re>120){var i=_statcounter.update_cookie(g);i.session_incremented&&(I=_statcounter.get_session_num(g),_=!0,h&&h.close()),re=s}t?G=s:s-G>1800&&(c=[],G=s);var f=r.type==u.EventType.IncrementalSnapshot&&r.data.source==u.IncrementalSource.Mutation;if(_===!0)if(t){var a="?sc_project="+g+"&u1="+R+"&sn="+I;_statcounter.get_config(a,function(U){U.visitor_recording!==0?(_="reactivate",w&&_statcounter._rrwebRecord.stop(),_statcounter._rrwebRecord(Q(g)),w=!0):ee()}),_="pending"}else return;f||(C&&clearTimeout(C),C=setTimeout(function(){w&&_statcounter._rrwebRecord.freezePage()},25e3));var o=r.type==u.EventType.IncrementalSnapshot&&r.data.userTriggered!==!1&&r.data.source==u.IncrementalSource.MouseInteraction&&r.data.type==u.MouseInteractions.Click,y=r.type==u.EventType.IncrementalSnapshot&&r.data.source==u.IncrementalSource.Scroll&&r.data.id===1;if(o||r.type===u.EventType.Meta){if(L==="on"&&(r.heatmap=!0),o&&(r.scroll=_statcounter._rrwebRecord.getWindowScroll(O),b.indexOf("off")!==-1&&h===void 0)){var v;b=="dev"||b.indexOf("wsdev")!==-1?v="https://dev.statcounter.io/click":v="https://statcounter.io/click";var l=structuredClone(r.data);l.targetClasses&&(l.targetClasses=JSON.stringify(l.targetClasses)),l.scrollLeft=r.scroll.left,l.scrollTop=r.scroll.top,l.pageW=_statcounter._rrwebRecord.getWindowWidth(),l.pageH=_statcounter._rrwebRecord.getWindowHeight(),l.project=g,l.visitor=_statcounter.get_visitor_id(g),l.session=_statcounter.get_session_num(g),l.path=O.location.pathname;var n=new URLSearchParams(l);["source","type","id"].forEach(function(U){return n.delete(U)}),navigator.sendBeacon(v+"?"+n.toString())}}else if(b.indexOf("off")!==-1)return;if(r.type!==u.EventType.FullSnapshot){if(r.type===u.EventType.Meta){r.data.referrer=_statcounter.get_referrer(),V!==!1&&(r.data.rrweb_timestamp=r.timestamp,r.timestamp=V);try{r.data.config=JSON.parse(sessionStorage.getItem("statcounter_config")),r.data.raw_cookie=m.cookie,r.data.counter_version=_statcounter.version(),r.data.recorder_version="3b5289-1d4f585f09963c2dad8bb7573b8e4540adbe7edf"}catch(U){}}if(f){for(var d in{adds:1,removes:1,attributes:1,texts:1})r.data[d].length||delete r.data[d];delete r.data.source}r.snapshot=D,q(!1,r);return}if(!1)var ie,ge;var r=JSON.parse(JSON.stringify(r));F=1,r.data.node=$(r.data.node);for(var P in p){var S=p[P];P.substring(0,1)=="#"&&S.attributes&&S.attributes.id&&(delete S.attributes.id,Object.keys(S.attributes).length==0&&delete S.attributes),S._style_fragment_nth&&delete S._style_fragment_nth;var ae=JSON.stringify(S),ie=le(ae);J[P]=ie,W[P]=ae.length}N={},A={};var fe=[];for(var se in p)fe.push([se,J[se]]);r["key-sig-list"]=fe,_statcounter._generate_uuid?D=_statcounter._generate_uuid(8):D="x"+Math.round(Math.random()*9e5+1e5),r.snapshot=D,q("pageload",r)}x._add_recording_event=function(e,t){if(w)try{_statcounter._rrwebRecord.addCustomEvent(e,t)}catch(s){}};var k,B;typeof m.hidden!="undefined"?(k="hidden",B="visibilitychange"):typeof m.msHidden!="undefined"?(k="msHidden",B="msvisibilitychange"):typeof m.webkitHidden!="undefined"&&(k="webkitHidden",B="webkitvisibilitychange");function de(){w&&(m[k]?(x._add_recording_event("window-hidden"),_statcounter._rrwebRecord.freezePage()):x._add_recording_event("window-visible"))}return typeof m.addEventListener=="undefined"||k===void 0||m.addEventListener(B,de,!1),x}(_statcounter);
// v: 1d4f585f09963c2dad8bb7573b8e4540adbe7edf
_statcounter._rrwebRecord=function(){"use strict";var W=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(W||{});function Cn(e){return e.nodeType===e.ELEMENT_NODE}function Ce(e){const t=e?.host;return Boolean(t?.shadowRoot===e)}function Ie(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function In(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function Mn(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function Re(e){try{const t=e.rules||e.cssRules;return t?In(Array.from(t,St).join("")):null}catch{return null}}function St(e){let t;if(On(e))try{t=Re(e.styleSheet)||Mn(e)}catch{}else if(Tn(e)&&e.selectorText.includes(":"))return kn(e.cssText);return t||e.cssText}function kn(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function On(e){return"styleSheet"in e}function Tn(e){return"selectorText"in e}class vt{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const o=this.nodeMetaMap.get(r);o&&this.nodeMetaMap.set(n,o)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function En(){return new vt}function Je({element:e,maskInputOptions:t,tagName:n,type:r,value:o,maskInputFn:s}){let c=o||"";const a=r&&ue(r);return(t[n.toLowerCase()]||a&&t[a])&&(s?c=s(c,e):c="*".repeat(c.length)),c}function ue(e){return e.toLowerCase()}const wt="__rrweb_original__";function Rn(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let o=0;o<e.height;o+=n){const s=t.getImageData,c=wt in s?s[wt]:s;if(new Uint32Array(c.call(t,r,o,Math.min(n,e.width-r),Math.min(n,e.height-o)).data.buffer).some(a=>a!==0))return!1}return!0}function Ze(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?ue(t):null}function Nn(e){const t=[],n=e.split(",");for(let r=0;r<n.length;r++){const o=n[r].trim(),s=o.indexOf(" ");s===-1?t.push(o):t.push(o.substring(0,s))}return t}const Ln=new Map([["IMG",new Set(["src","srcset"])],["VIDEO",new Set(["src"])],["AUDIO",new Set(["src"])],["EMBED",new Set(["src"])],["SOURCE",new Set(["src"])],["TRACK",new Set(["src"])],["INPUT",new Set(["src"])],["IFRAME",new Set(["src"])],["OBJECT",new Set(["src"])],["BODY",new Set(["background"])],["TABLE",new Set(["background"])],["TD",new Set(["background"])],["TR",new Set(["background"])],["TH",new Set(["background"])],["TBODY",new Set(["background"])],["THEAD",new Set(["background"])],["image",new Set(["href"])],["feImage",new Set(["href"])],["cursor",new Set(["href"])]]);function Ct(e,t){const n=Ln.get(e.nodeName);return n?n.has(t):!1}let It=1;const xn=new RegExp("[^a-z0-9-_:]"),me=-2;function Ke(){return It++}function Dn(e){if(e instanceof HTMLFormElement)return"form";const t=ue(e.tagName);return xn.test(t)?"div":t}function An(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let fe,Mt;const _n=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Fn=/^(?:[a-z+]+:)?\/\//i,Pn=/^www\..*/i,$n=/^(data:)([^,]*),(.*)/i;function Ne(e,t){return(e||"").replace(_n,(n,r,o,s,c,a)=>{const l=o||c||a,i=r||s||"";if(!l)return n;if(Fn.test(l)||Pn.test(l))return`url(${i}${l}${i})`;if($n.test(l))return`url(${i}${l}${i})`;if(l[0]==="/")return`url(${i}${An(t)+l}${i})`;const u=t.split("/"),h=l.split("/");u.pop();for(const m of h)m!=="."&&(m===".."?u.pop():u.push(m));return`url(${i}${u.join("/")}${i})`})}const Un=/^[^ \t\n\r\u000c]+/,Wn=/^[, \t\n\r\u000c]+/;function kt(e,t,n){if(t.trim()==="")return t;let r=0;function o(c){let a;const l=c.exec(t.substring(r));return l?(a=l[0],r+=a.length,a):""}const s=[];for(;o(Wn),!(r>=t.length);){let c=o(Un);if(c.slice(-1)===",")c=n(e,c.substring(0,c.length-1)),s.push(c);else{let a="";c=n(e,c);let l=!1;for(;;){const i=t.charAt(r);if(i===""){s.push((c+a).trim());break}else if(l)i===")"&&(l=!1);else if(i===","){r+=1,s.push((c+a).trim());break}else i==="("&&(l=!0);a+=i,r+=1}}}return s.join(", ")}function jn(e,t){return kt(e,t,(n,r)=>Qe(n,r))}function zn(e){const t=new Set;return kt(document,e,(n,r)=>(t.add(r),r)),Array.from(t)}function Qe(e,t){if(!t||t.trim()==="")return t;try{return new URL(t,e.location.href).href}catch{const r=document.createElement("a");return r.setAttribute("href",t),r.href}}function Hn(e){return Boolean(e.tagName==="svg"||e.ownerSVGElement)}function et(e){try{const t=new URL(e.location.href);return t.hash="",t.href}catch{const n=document.createElement("a");return n.setAttribute("href",""),n.href}}function Ot(e,t,n,r){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Qe(e,r):n==="srcset"?jn(e,r):n==="style"?Ne(r,et(e)):t==="object"&&n==="data"?Qe(e,r):r)}function Tt(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Bn(e,t,n){try{if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let r=e.classList.length;r--;){const o=e.classList[r];if(t.test(o))return!0}if(n)return e.matches(n)}catch{}return!1}function Le(e,t,n){if(!e)return!1;if(e.nodeType!==e.ELEMENT_NODE)return n?Le(e.parentNode,t,n):!1;for(let r=e.classList.length;r--;){const o=e.classList[r];if(t.test(o))return!0}return n?Le(e.parentNode,t,n):!1}function Et(e,t,n,r){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(typeof t=="string"){if(r){if(o.closest(`.${t}`))return!0}else if(o.classList.contains(t))return!0}else if(Le(o,t,r))return!0;if(n){if(r){if(o.closest(n))return!0}else if(o.matches(n))return!0}}catch{}return!1}function Vn(e,t,n){const r=e.contentWindow;if(!r)return;let o=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=setTimeout(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),o=!0,t()});return}const c="about:blank";if(r.location.href!==c||e.src===c||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function qn(e,t,n){let r=!1,o;try{o=e.sheet}catch{return}if(o)return;const s=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(s),r=!0,t()})}function Gn(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,needsMask:c,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:i,maskInputFn:u,dataURLOptions:h={},inlineImages:m,recordCanvas:d,keepIframeSrcFn:f,newlyAddedElement:p=!1,onAssetDetected:y}=t,g=Xn(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:W.Document,childNodes:[],compatMode:e.compatMode}:{type:W.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:W.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:g};case e.ELEMENT_NODE:return Jn(e,{doc:n,blockClass:o,blockSelector:s,inlineStylesheet:a,maskInputOptions:l,maskInputFn:u,dataURLOptions:h,inlineImages:m,recordCanvas:d,keepIframeSrcFn:f,newlyAddedElement:p,rootId:g,onAssetDetected:y});case e.TEXT_NODE:return Yn(e,{doc:n,needsMask:c,maskTextFn:i,rootId:g});case e.CDATA_SECTION_NODE:return{type:W.CDATA,textContent:"",rootId:g};case e.COMMENT_NODE:return{type:W.Comment,textContent:e.textContent||"",rootId:g};default:return!1}}function Xn(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function Yn(e,t){var n;const{needsMask:r,maskTextFn:o,rootId:s}=t,c=e.parentNode&&e.parentNode.tagName;let a=e.textContent;const l=c==="STYLE"?!0:void 0,i=c==="SCRIPT"?!0:void 0;if(l&&a){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(a=Re(e.parentNode.sheet))}catch(u){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${u}`,e)}a=Ne(a,et(t.doc))}return i&&(a="SCRIPT_PLACEHOLDER"),!l&&!i&&a&&r&&(a=o?o(a,e.parentElement):a.replace(/[\S]/g,"*")),{type:W.Text,textContent:a||"",isStyle:l,rootId:s}}function Jn(e,t){const{doc:n,blockClass:r,blockSelector:o,inlineStylesheet:s,maskInputOptions:c={},maskInputFn:a,dataURLOptions:l={},inlineImages:i,recordCanvas:u,keepIframeSrcFn:h,newlyAddedElement:m=!1,rootId:d,onAssetDetected:f=!1}=t,p=Bn(e,r,o),y=Dn(e);let g={};const b=[],I=e.attributes.length;for(let v=0;v<I;v++){const S=e.attributes[v];if(!Tt(y,S.name,S.value)){const C=g[S.name]=Ot(n,y,ue(S.name),S.value);C&&f&&Ct(e,S.name)&&(S.name==="srcset"?b.push(...Nn(C)):b.push(C))}}if(y==="link"&&s){const v=Array.from(n.styleSheets).find(C=>C.href===e.href);let S=null;v&&(S=Re(v)),S&&(delete g.rel,g._originalHref=g.href,delete g.href,g._cssText=Ne(S,v.href))}if(y==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const v=Re(e.sheet);v&&(g._cssText=Ne(v,et(n)))}if(y==="input"||y==="textarea"||y==="select"){const v=e.value,S=e.checked;g.type!=="radio"&&g.type!=="checkbox"&&g.type!=="submit"&&g.type!=="button"&&v?g.value=Je({element:e,type:Ze(e),tagName:y,value:v,maskInputOptions:c,maskInputFn:a}):S&&(g.checked=S)}if(y==="option"&&(e.selected&&!c.select?g.selected=!0:delete g.selected),y==="canvas"&&u){if(e.__context==="2d")Rn(e)||(g.rr_dataURL=e.toDataURL(l.type,l.quality));else if(!("__context"in e)){const v=e.toDataURL(l.type,l.quality),S=document.createElement("canvas");S.width=e.width,S.height=e.height;const C=S.toDataURL(l.type,l.quality);v!==C&&(g.rr_dataURL=v)}}if(y==="img"&&i){fe||(fe=n.createElement("canvas"),Mt=fe.getContext("2d"));const v=e,S=v.crossOrigin;v.crossOrigin="anonymous";const C=()=>{v.removeEventListener("load",C);try{fe.width=v.naturalWidth,fe.height=v.naturalHeight,Mt.drawImage(v,0,0),g.rr_dataURL=fe.toDataURL(l.type,l.quality)}catch(D){console.warn(`Cannot inline img src=${v.currentSrc}! Error: ${D}`)}S?g.crossOrigin=S:v.removeAttribute("crossorigin")};v.complete&&v.naturalWidth!==0?C():v.addEventListener("load",C)}if((y==="audio"||y==="video")&&(g.rr_mediaState=e.paused?"paused":"played",g.rr_mediaCurrentTime=e.currentTime),m||(e.scrollLeft&&(g.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(g.rr_scrollTop=e.scrollTop)),p){const{width:v,height:S}=e.getBoundingClientRect();g={class:g.class,rr_width:`${v}px`,rr_height:`${S}px`}}y==="iframe"&&!h(g.src)&&(e.contentDocument||(g.rr_src=g.src),delete g.src),b.length&&f&&f({urls:b});let R;try{customElements.get(y)&&(R=!0)}catch{}return{type:W.Element,tagName:y,attributes:g,childNodes:[],isSVG:Hn(e)||void 0,needBlock:p,rootId:d,isCustom:R}}function A(e){return e==null?"":e.toLowerCase()}function Zn(e,t,n){if(n.comment&&e.type===W.Comment)return!0;if(e.type===W.Element){if(n.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js"))||n.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(A(e.attributes.name).match(/^msapplication-tile(image|color)$/)||A(e.attributes.name)==="application-name"||A(e.attributes.rel)==="icon"||A(e.attributes.rel)==="apple-touch-icon"||A(e.attributes.rel)==="shortcut icon"))||n.headMismatchedMedia&&e.tagName==="link"&&A(e.attributes.media)==="print")return!0;if(e.tagName==="meta"){if(n.headMetaDescKeywords&&A(e.attributes.name).match(/^description|keywords$/)||n.headMetaSocial&&(A(e.attributes.property).match(/^(og|twitter|fb):/)||A(e.attributes.name).match(/^(og|twitter):/)||A(e.attributes.name)==="pinterest")||n.headMetaRobots&&(A(e.attributes.name)==="robots"||A(e.attributes.name)==="googlebot"||A(e.attributes.name)==="bingbot")||n.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0||n.headMetaAuthorship&&(A(e.attributes.name)==="author"||A(e.attributes.name)==="generator"||A(e.attributes.name)==="framework"||A(e.attributes.name)==="publisher"||A(e.attributes.name)==="progid"||A(e.attributes.property).match(/^article:/)||A(e.attributes.property).match(/^product:/))||n.headMetaVerification&&(A(e.attributes.name)==="google-site-verification"||A(e.attributes.name)==="yandex-verification"||A(e.attributes.name)==="csrf-token"||A(e.attributes.name)==="p:domain_verify"||A(e.attributes.name)==="verify-v1"||A(e.attributes.name)==="verification"||A(e.attributes.name)==="shopify-checkout-api-token"))return!0}else if(n.adPlaceholder&&e.tagName=="ins"){let r=Array.from(t.childNodes).filter(o=>o.nodeType===o.ELEMENT_NODE);if(r.length==1&&r[0].id&&r[0].id.substring(0,7)==="aswift_")return e.placeholderClass="rrweb-ad-placeholder",!0}}return!1}function ge(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:s,maskTextClass:c,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:i=!0,maskInputOptions:u={},maskTextFn:h,maskInputFn:m,slimDOMOptions:d,dataURLOptions:f={},inlineImages:p=!1,recordCanvas:y=!1,onSerialize:g,onIframeLoad:b,iframeLoadTimeout:I=5e3,onStylesheetLoad:R,stylesheetLoadTimeout:v=5e3,keepIframeSrcFn:S=()=>!1,newlyAddedElement:C=!1,onAssetDetected:D}=t;let{needsMask:x}=t,{preserveWhiteSpace:H=!0,ignoreChildren:J=!1}=t;!x&&e.childNodes&&(x=Et(e,c,a,x===void 0));const N=Gn(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,needsMask:x,inlineStylesheet:i,maskInputOptions:u,maskTextFn:h,maskInputFn:m,dataURLOptions:f,inlineImages:p,recordCanvas:y,keepIframeSrcFn:S,newlyAddedElement:C,onAssetDetected:D});if(!N)return console.warn(e,"not serialized"),null;let j;r.hasNode(e)?j=r.getId(e):J||Zn(N,e,d)||!H&&N.type===W.Text&&!N.isStyle&&!N.textContent.replace(/^\s+|\s+$/gm,"").length?(J=!0,j=me):j=Ke();const O=Object.assign(N,{id:j});r.add(e,O),g&&g(e);let oe=!l;if(O.type===W.Element){oe=oe&&!O.needBlock,delete O.needBlock;const B=e.shadowRoot;B&&Ie(B)&&(O.isShadowHost=!0)}if((O.type===W.Document||O.type===W.Element)&&oe){d.headWhitespace&&O.type===W.Element&&O.tagName==="head"&&(H=!1);const B={doc:n,mirror:r,blockClass:o,blockSelector:s,needsMask:x,maskTextClass:c,maskTextSelector:a,skipChild:l,ignoreChildren:J,inlineStylesheet:i,maskInputOptions:u,maskTextFn:h,maskInputFn:m,slimDOMOptions:d,dataURLOptions:f,inlineImages:p,recordCanvas:y,preserveWhiteSpace:H,onSerialize:g,onIframeLoad:b,iframeLoadTimeout:I,onStylesheetLoad:R,stylesheetLoadTimeout:v,keepIframeSrcFn:S,onAssetDetected:D};if(!(O.type===W.Element&&O.tagName==="textarea"&&O.attributes.value!==void 0))for(const E of Array.from(e.childNodes)){const L=ge(E,B);L&&O.childNodes.push(L)}if(Cn(e)&&e.shadowRoot)for(const E of Array.from(e.shadowRoot.childNodes)){const L=ge(E,B);L&&(Ie(e.shadowRoot)&&(L.isShadow=!0),O.childNodes.push(L))}}return e.parentNode&&Ce(e.parentNode)&&Ie(e.parentNode)&&(O.isShadow=!0),j===me?O.type===W.Element&&O.placeholderClass?{type:W.Element,tagName:"div",attributes:{style:"width: "+e.clientWidth+"px;height: "+e.clientHeight+"px;",class:O.placeholderClass},childNodes:[],id:Ke()}:null:(O.type===W.Element&&O.tagName==="iframe"&&Vn(e,()=>{const B=e.contentDocument;if(B&&b){const E=ge(B,{doc:B,mirror:r,blockClass:o,blockSelector:s,needsMask:x,maskTextClass:c,maskTextSelector:a,skipChild:!1,ignoreChildren:!1,inlineStylesheet:i,maskInputOptions:u,maskTextFn:h,maskInputFn:m,slimDOMOptions:d,dataURLOptions:f,inlineImages:p,recordCanvas:y,preserveWhiteSpace:H,onSerialize:g,onIframeLoad:b,iframeLoadTimeout:I,onStylesheetLoad:R,stylesheetLoadTimeout:v,keepIframeSrcFn:S});E&&b(e,E)}},I),O.type===W.Element&&O.tagName==="link"&&O.attributes.rel==="stylesheet"&&qn(e,()=>{if(R){const B=ge(e,{doc:n,mirror:r,blockClass:o,blockSelector:s,needsMask:x,maskTextClass:c,maskTextSelector:a,skipChild:!1,ignoreChildren:!1,inlineStylesheet:i,maskInputOptions:u,maskTextFn:h,maskInputFn:m,slimDOMOptions:d,dataURLOptions:f,inlineImages:p,recordCanvas:y,preserveWhiteSpace:H,onSerialize:g,onIframeLoad:b,iframeLoadTimeout:I,onStylesheetLoad:R,stylesheetLoadTimeout:v,keepIframeSrcFn:S});B&&R(e,B)}},v),O)}function Kn(e,t){const{mirror:n=new vt,blockClass:r="rr-block",blockSelector:o=null,maskTextClass:s="rr-mask",maskTextSelector:c=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:i=!1,maskAllInputs:u=!1,maskTextFn:h,maskInputFn:m,slimDOM:d=!1,dataURLOptions:f,preserveWhiteSpace:p,onSerialize:y,onIframeLoad:g,iframeLoadTimeout:b,onStylesheetLoad:I,stylesheetLoadTimeout:R,onAssetDetected:v,keepIframeSrcFn:S=()=>!1}=t||{};return ge(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,maskTextClass:s,maskTextSelector:c,skipChild:!1,ignoreChildren:!1,inlineStylesheet:a,maskInputOptions:u===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:u===!1?{password:!0}:u,maskTextFn:h,maskInputFn:m,slimDOMOptions:d===!0||d==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:d==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0,adPlaceholder:d==="all",headMismatchedMedia:!0}:d===!1?{}:d,dataURLOptions:f,inlineImages:l,recordCanvas:i,preserveWhiteSpace:p,onSerialize:y,onIframeLoad:g,iframeLoadTimeout:b,onStylesheetLoad:I,stylesheetLoadTimeout:R,keepIframeSrcFn:S,newlyAddedElement:!1,onAssetDetected:v})}function Qn(){It=1}function q(e,t,n){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const ye=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Rt={map:{},getId(){return console.error(ye),-1},getNode(){return console.error(ye),null},removeNodeFromMap(){console.error(ye)},has(){return console.error(ye),!1},reset(){console.error(ye)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Rt=new Proxy(Rt,{get(e,t,n){return t==="map"&&console.error(ye),Reflect.get(e,t,n)}}));function Me(e,t,n={}){let r=null,o=0;return function(...s){const c=Date.now();!o&&n.leading===!1&&(o=c);const a=t-(c-o),l=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),o=c,e.apply(l,s)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{o=n.leading===!1?0:Date.now(),r=null,e.apply(l,s)},a))}}function xe(e,t,n,r,o=window){const s=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(c){setTimeout(()=>{n.set.call(this,c)},0),s&&s.set&&s.set.call(this,c)}}),()=>xe(e,t,s||{},!0)}function se(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return typeof o=="function"&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch{return()=>{}}}let be=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(be=()=>new Date().getTime());function De(e){var t,n,r,o,s,c;const a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:a?.documentElement.scrollLeft||((n=(t=a?.body)==null?void 0:t.parentElement)==null?void 0:n.scrollLeft)||((r=a?.body)==null?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:a?.documentElement.scrollTop||((s=(o=a?.body)==null?void 0:o.parentElement)==null?void 0:s.scrollTop)||((c=a?.body)==null?void 0:c.scrollTop)||0}}function tt(){let e=window;for(;e.parent&&e.parent!=e;)try{let t=e.parent.document;e=e.parent}catch{break}return e}function nt(){const e=tt(),t=e.document;return e.innerHeight||t.documentElement&&t.documentElement.clientHeight||t.body&&t.body.clientHeight}function rt(){const e=tt(),t=e.document;return e.innerWidth||t.documentElement&&t.documentElement.clientWidth||t.body&&t.body.clientWidth}function Nt(e){return e?e.nodeType===e.ELEMENT_NODE?e:e.parentElement:null}function G(e,t,n,r){if(!e)return!1;const o=Nt(e);if(!o)return!1;try{if(typeof t=="string"){if(o.classList.contains(t)||r&&o.closest("."+t)!==null)return!0}else if(Le(o,t,r))return!0}catch{}return!!(n&&(o.matches(n)||r&&o.closest(n)!==null))}function er(e,t){return t.getId(e)!==-1}function ot(e,t,n){return e.tagName==="TITLE"&&n.headTitleMutations?!0:t.getId(e)===me}function Lt(e,t){if(Ce(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Lt(e.parentNode,t):!0:!0}function st(e){return Boolean(e.changedTouches)}function tr(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function xt(e,t){return Boolean(e.nodeName==="IFRAME"&&t.getMeta(e))}function Dt(e,t){return Boolean(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function at(e){return Boolean(e?.shadowRoot)}class nr{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!=null?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function At(e){var t,n;let r=null;return((n=(t=e.getRootNode)==null?void 0:t.call(e))==null?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function rr(e){let t=e,n;for(;n=At(t);)t=n;return t}function or(e){const t=e.ownerDocument;if(!t)return!1;const n=rr(e);return t.contains(n)}function _t(e){const t=e.ownerDocument;return t?t.contains(e)||or(e):!1}var M=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e[e.Asset=7]="Asset",e))(M||{}),k=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(k||{}),P=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(P||{}),ne=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ne||{}),Se=(e=>(e[e["2D"]=0]="2D",e[e.WebGL=1]="WebGL",e[e.WebGL2=2]="WebGL2",e))(Se||{}),ve=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(ve||{}),sr=(e=>(e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change",e.PlayBack="play-back",e.Destroy="destroy",e))(sr||{}),Ft=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Ft||{});function Pt(e){return"__ln"in e}class ar{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&Pt(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&Pt(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;!this.head||(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const $t=(e,t)=>`${e}@${t}`;class ir{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=t=>{if(this.frozen||this.locked)return;typeof t>"u"&&(t=be());const n=[],r=new Set,o=new ar,s=i=>{let u=i,h=me;for(;h===me;)u=u&&u.nextSibling,h=u&&this.mirror.getId(u);return h},c=i=>{if(!i.parentNode||!_t(i)||i.parentNode.tagName==="TEXTAREA")return;const u=Ce(i.parentNode)?this.mirror.getId(At(i)):this.mirror.getId(i.parentNode);if(u===me)return;const h=s(i);if(u===-1||h===-1)return o.addNode(i);const m=ge(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,onSerialize:d=>{xt(d,this.mirror)&&this.iframeManager.addIframe(d),Dt(d,this.mirror)&&this.stylesheetManager.trackLinkElement(d),at(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(d,f)=>{this.iframeManager.attachIframe(d,f),this.shadowDomManager.observeAttachShadow(d)},onStylesheetLoad:(d,f)=>{this.stylesheetManager.attachLinkElement(d,f)},onAssetDetected:d=>{d.urls.forEach(f=>{this.assetManager.capture(f)})}});m&&(n.push({parentId:u,nextId:h,node:m}),r.add(m.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const i of this.movedSet)Ut(this.removes,i,this.mirror)&&!this.movedSet.has(i.parentNode)||c(i);for(const i of this.addedSet)!jt(this.droppedSet,i)&&!Ut(this.removes,i,this.mirror)||jt(this.movedSet,i)?c(i):this.droppedSet.add(i);let a=null;for(;o.length;){let i=null;if(a){const u=this.mirror.getId(a.value.parentNode),h=s(a.value);u!==-1&&h!==-1&&(i=a)}if(!i){let u=o.tail;for(;u;){const h=u;if(u=u.previous,h){const m=this.mirror.getId(h.value.parentNode);if(s(h.value)===-1)continue;if(m!==-1){i=h;break}else{const d=h.value;if(d.parentNode&&d.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const f=d.parentNode.host;if(this.mirror.getId(f)!==-1){i=h;break}}}}}}if(!i){for(;o.head;)o.removeNode(o.head.value);break}a=i.previous,o.removeNode(i.value),c(i.value)}const l={texts:this.texts.map(i=>{const u=i.node;return u.parentNode.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(u.parentNode),{id:this.mirror.getId(u),value:i.value}}).filter(i=>!r.has(i.id)).filter(i=>this.mirror.has(i.id)),attributes:this.attributes.map(i=>{const{attributes:u}=i;if(typeof u.style=="string"){const h=JSON.stringify(i.styleDiff),m=JSON.stringify(i._unchangedStyles);h.length<u.style.length&&(h+m).split("var(").length===u.style.split("var(").length&&(u.style=i.styleDiff)}return{id:this.mirror.getId(i.node),attributes:u}}).filter(i=>!r.has(i.id)).filter(i=>this.mirror.has(i.id)),removes:this.removes,adds:n};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l,t))},this.genTextAreaValueMutation=t=>{let n=this.attributeMap.get(t);n||(n={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(n),this.attributeMap.set(t,n)),n.attributes.value=Array.from(t.childNodes,r=>r.textContent||"").join("")},this.processMutation=t=>{if(!ot(t.target,this.mirror,this.slimDOMOptions))switch(t.type){case"characterData":{const n=t.target.textContent;!G(t.target,this.blockClass,this.blockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Et(t.target,this.maskTextClass,this.maskTextSelector,!0)&&n?this.maskTextFn?this.maskTextFn(n,Nt(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,o=t.target.getAttribute(r);if(r==="value"){const c=Ze(n);o=Je({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:c,value:o,maskInputFn:this.maskInputFn})}if(G(t.target,this.blockClass,this.blockSelector,!1)||o===t.oldValue)return;let s=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(o))if(!n.contentDocument)r="rr_src";else return;if(s||(s={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(s),this.attributeMap.set(t.target,s)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Tt(n.tagName,r)){const c=s.attributes[r]=Ot(this.doc,ue(n.tagName),ue(r),o);if(c&&this.assetManager.isAttributeCacheable(n,r)&&(r==="srcset"?zn(c).forEach(a=>{this.assetManager.capture(a)}):this.assetManager.capture(c)),r==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const a=this.unattachedDoc.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const l of Array.from(n.style)){const i=n.style.getPropertyValue(l),u=n.style.getPropertyPriority(l);i!==a.style.getPropertyValue(l)||u!==a.style.getPropertyPriority(l)?u===""?s.styleDiff[l]=i:s.styleDiff[l]=[i,u]:s._unchangedStyles[l]=[i,u]}for(const l of Array.from(a.style))n.style.getPropertyValue(l)===""&&(s.styleDiff[l]=!1)}}break}case"childList":{if(G(t.target,this.blockClass,this.blockSelector,!0))return;if(t.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(t.target);return}const n=new Array;t.addedNodes.forEach(r=>{for(n.push([r,t.target]);n.length;){const o=n.pop();if(!o)throw new Error("Add queue is corrupt, there is no next item to process");const s=o[0],c=o[1];if(!this.processedNodeManager.inOtherBuffer(s,this)&&!(this.addedSet.has(s)||this.movedSet.has(s))){if(this.mirror.hasNode(s)){if(ot(s,this.mirror,this.slimDOMOptions))continue;this.movedSet.add(s);let a=null;c&&this.mirror.hasNode(c)&&(a=this.mirror.getId(c)),a&&a!==-1&&(this.movedMap[$t(this.mirror.getId(s),a)]=!0)}else this.addedSet.add(s),this.droppedSet.delete(s);G(s,this.blockClass,this.blockSelector,!1)||(s.childNodes.forEach(a=>{n.push([a,void 0])}),at(s)&&s.shadowRoot.childNodes.forEach(a=>{this.processedNodeManager.add(a,this),n.push([a,s])}))}}}),t.removedNodes.forEach(r=>{const o=this.mirror.getId(r),s=Ce(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);G(t.target,this.blockClass,this.blockSelector,!1)||ot(r,this.mirror,this.slimDOMOptions)||!er(r,this.mirror)||(this.addedSet.has(r)?(it(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&o===-1||Lt(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[$t(o,s)]?it(this.movedSet,r):this.removes.push({parentId:s,id:o,isShadow:Ce(t.target)&&Ie(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager","assetManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(t){this.frozen=!1,this.canvasManager.unfreeze(),this.emit(t)}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function it(e,t){e.delete(t),t.childNodes.forEach(n=>it(e,n))}function Ut(e,t,n){return e.length===0?!1:Wt(e,t,n)}function Wt(e,t,n){const{parentNode:r}=t;if(!r)return!1;const o=n.getId(r);return e.some(s=>s.id===o)?!0:Wt(e,r,n)}function jt(e,t){return e.size===0?!1:zt(e,t)}function zt(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:zt(e,n):!1}let ke;function lr(e){ke=e}function cr(){ke=void 0}const T=e=>ke?(...t)=>{try{return e(...t)}catch(n){if(ke&&ke(n)===!0)return;throw n}}:e;var ae;(function(e){e[e.All=0]="All",e[e.Two=1]="Two",e[e.One=2]="One"})(ae||(ae={}));let Q,lt;function Oe(e,t){if(e.nodeType!==Node.ELEMENT_NODE)throw new Error("Can't generate CSS selector for non-element node type.");if(e.tagName.toLowerCase()==="html")return"html";const n={root:document.body,idName:o=>!0,className:o=>!0,tagName:o=>!0,attr:(o,s)=>!1,seedMinLength:1,optimizedMinLength:2,threshold:1e3,maxNumberOfTries:1e4};Q=Object.assign(Object.assign({},n),t),lt=ur(Q.root,n);let r=ct(e,ae.All,()=>ct(e,ae.Two,()=>ct(e,ae.One)));if(r){const o=Gt(Xt(r,e));return o.length>0&&(r=o[0]),Te(r)}else throw new Error("Selector was not found.")}function ur(e,t){return e.nodeType===Node.DOCUMENT_NODE?e:e===t.root?e.ownerDocument:e}function ct(e,t,n){let r=null,o=[],s=e,c=0;for(;s&&s!==Q.root.parentElement;){let a=Ae(dr(s))||Ae(...pr(s))||Ae(...hr(s))||Ae(mr(s))||[fr()];const l=gr(s);if(t===ae.All)l&&(a=a.concat(a.filter(dt).map(i=>ut(i,l))));else if(t===ae.Two)a=a.slice(0,1),l&&(a=a.concat(a.filter(dt).map(i=>ut(i,l))));else if(t===ae.One){const[i]=a=a.slice(0,1);l&&dt(i)&&(a=[ut(i,l)])}for(let i of a)i.level=c;if(o.push(a),o.length>=Q.seedMinLength&&(r=Ht(o,n),r))break;s=s.parentElement,c++}return r||(r=Ht(o,n)),r}function Ht(e,t){const n=Gt(qt(e));if(n.length>Q.threshold)return t?t():null;for(let r of n)if(Vt(r))return r;return null}function Te(e){let t=e[0],n=t.name;for(let r=1;r<e.length;r++){const o=e[r].level||0;t.level===o-1?n=`${e[r].name} > ${n}`:n=`${e[r].name} ${n}`,t=e[r]}return n}function Bt(e){return e.map(t=>t.penalty).reduce((t,n)=>t+n,0)}function Vt(e){switch(lt.querySelectorAll(Te(e)).length){case 0:throw new Error(`Can't select any node with this selector: ${Te(e)}`);case 1:return!0;default:return!1}}function dr(e){const t=e.getAttribute("id");return t&&Q.idName(t)?{name:"#"+_e(t,{isIdentifier:!0}),penalty:0}:null}function pr(e){return Array.from(e.attributes).filter(n=>Q.attr(n.name,n.value)).map(n=>({name:"["+_e(n.name,{isIdentifier:!0})+'="'+_e(n.value)+'"]',penalty:.5}))}function hr(e){return Array.from(e.classList).filter(Q.className).map(n=>({name:"."+_e(n,{isIdentifier:!0}),penalty:1}))}function mr(e){const t=e.tagName.toLowerCase();return Q.tagName(t)?{name:t,penalty:2}:null}function fr(){return{name:"*",penalty:3}}function gr(e){const t=e.parentNode;if(!t)return null;let n=t.firstChild;if(!n)return null;let r=0;for(;n&&(n.nodeType===Node.ELEMENT_NODE&&r++,n!==e);)n=n.nextSibling;return r}function ut(e,t){return{name:e.name+`:nth-child(${t})`,penalty:e.penalty+1}}function dt(e){return e.name!=="html"&&!e.name.startsWith("#")}function Ae(...e){const t=e.filter(yr);return t.length>0?t:null}function yr(e){return e!=null}function*qt(e,t=[]){if(e.length>0)for(let n of e[0])yield*qt(e.slice(1,e.length),t.concat(n));else yield t}function Gt(e){return Array.from(e).sort((t,n)=>Bt(t)-Bt(n))}function*Xt(e,t,n={counter:0,visited:new Map}){if(e.length>2&&e.length>Q.optimizedMinLength)for(let r=1;r<e.length-1;r++){if(n.counter>Q.maxNumberOfTries)return;n.counter+=1;const o=[...e];o.splice(r,1);const s=Te(o);if(n.visited.has(s))return;Vt(o)&&br(o,t)&&(yield o,n.visited.set(s,!0),yield*Xt(o,t,n))}}function br(e,t){return lt.querySelector(Te(e))===t}const Sr=/[ -,\.\/:-@\[-\^`\{-~]/,vr=/[ -,\.\/:-@\[\]\^`\{-~]/,wr=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,Cr={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};function _e(e,t={}){const n=Object.assign(Object.assign({},Cr),t);n.quotes!="single"&&n.quotes!="double"&&(n.quotes="single");const r=n.quotes=="double"?'"':"'",o=n.isIdentifier,s=e.charAt(0);let c="",a=0;const l=e.length;for(;a<l;){const i=e.charAt(a++);let u=i.charCodeAt(0),h;if(u<32||u>126){if(u>=55296&&u<=56319&&a<l){const m=e.charCodeAt(a++);(m&64512)==56320?u=((u&1023)<<10)+(m&1023)+65536:a--}h="\\"+u.toString(16).toUpperCase()+" "}else n.escapeEverything?Sr.test(i)?h="\\"+i:h="\\"+u.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(i)?h="\\"+u.toString(16).toUpperCase()+" ":i=="\\"||!o&&(i=='"'&&r==i||i=="'"&&r==i)||o&&vr.test(i)?h="\\"+i:h=i;c+=h}return o&&(/^-[-\d]/.test(c)?c="\\-"+c.slice(1):/\d/.test(s)&&(c="\\3"+s+" "+c.slice(1))),c=c.replace(wr,function(i,u,h){return u&&u.length%2?i:(u||"")+h}),!o&&n.wrap?r+c+r:c}var Ir=Object.defineProperty,Mr=Object.defineProperties,kr=Object.getOwnPropertyDescriptors,Yt=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Tr=Object.prototype.propertyIsEnumerable,Jt=(e,t,n)=>t in e?Ir(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,X=(e,t)=>{for(var n in t||(t={}))Or.call(t,n)&&Jt(e,n,t[n]);if(Yt)for(var n of Yt(t))Tr.call(t,n)&&Jt(e,n,t[n]);return e},te=(e,t)=>Mr(e,kr(t));const de=[];let Fe=null;function Pe(e){return e.startsWith("styled__")||e.startsWith("sc-")||e.indexOf("__sc-")!==-1||e.match(/^jss[0-9]+$/)||e.match(/[0-9a-fA-F]{32}/)?!1:!["active","selected","hover","hidden","collapsed","pressed","animating","finished"].includes(e)}function $e(e){return e.match(/^ember[0-9]+$/)||e.match(/^yui/)?!1:!e.match(/[0-9a-fA-F]{32}/)}function Er(e,t){return(e==="href"||e==="src")&&!t.includes("?")&&t.length<40}function Ue(e){return!["div","span"].includes(e)}function Ee(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}const Rr=e=>{let t=[],n,r={DIV:!1,SPAN:!1};for(;n=e.parentNode;){let o=e.tagName,s,c=o==="DIV"||o==="SPAN";if(e.id&&!e.id.match(/[0-9]/))c?s=`#${e.id}`:s=`${o.toLowerCase()}#${e.id}`;else{let a=n.children,l=[].filter.call(a,i=>i.tagName===o);l.length===1?s=o:c&&a.length===l.length?s=`:nth-child(${1+[].indexOf.call(a,e)})`:s=`${o}:nth-of-type(${1+[].indexOf.call(l,e)})`}if(t.length>1&&(t[0]=="DIV"||t[0]=="SPAN")&&e.querySelectorAll(`${t.slice(1).join(" > ")}`).length===1?t=[`${s} ${t.slice(1).join(" > ")}`]:t.unshift(s),e.id&&!e.id.match(/[0-9]/)||(r[o]===void 0&&(r[o]=document.getElementsByTagName(o).length===1),r[o]))break;e=n}return`${t.join(" > ")}`.toLowerCase()};function Zt(e,t){var n,r;const o=new ir;de.push(o),o.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const c=(r=(n=window?.Zone)==null?void 0:n.__symbol__)==null?void 0:r.call(n,"MutationObserver");c&&window[c]&&(s=window[c]);const a=new s(T(o.processMutations.bind(o)));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Nr({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const o=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let c=[],a,l;function i(d){if(!c.length)return;Fe=null;const f=d-a;e(c.map(p=>(p.timeOffset-=f,p)),l,d),c=[],a=null}const u=T(Me(i,s)),h=T(Me(T(d=>{const f=Ee(d),{clientX:p,clientY:y}=st(d)?d.changedTouches[0]:d;a||(a=be()),c.push({x:p,y,id:r.getId(f),timeOffset:be()-a}),l=typeof DragEvent<"u"&&d instanceof DragEvent?k.Drag:d instanceof MouseEvent?k.MouseMove:k.TouchMove,Fe=i,u(be())}),o,{trailing:!1})),m=[q("mousemove",h,n),q("touchmove",h,n),q("drag",h,n)];return T(()=>{m.forEach(d=>d())})}function Lr({mouseInteractionCb:e,doc:t,mirror:n,triangulateClicks:r,blockClass:o,blockSelector:s,sampling:c}){if(c.mouseInteraction===!1)return()=>{};const a=c.mouseInteraction===!0||c.mouseInteraction===void 0?{}:c.mouseInteraction,l=[];let i=null,u=null;const h=m=>d=>{let f=null,p=m;if("pointerType"in d){switch(d.pointerType){case"mouse":f=ne.Mouse;break;case"touch":f=ne.Touch;break;case"pen":f=ne.Pen;break}f===ne.Touch?P[m]===P.MouseDown?p="TouchStart":P[m]===P.MouseUp&&(p="TouchEnd"):ne.Pen}else st(d)&&(f=ne.Touch);f!==null?(i=f,(p.startsWith("Touch")&&f===ne.Touch||p.startsWith("Mouse")&&f===ne.Mouse)&&(f=null)):P[m]===P.Click&&(f=i,i=null);const y=st(d)?d.changedTouches[0]:d;if(!y)return;switch(P[m]){case P.MouseDown:case P.TouchStart:u={pageX:y.pageX,pageY:y.pageY,clientX:y.clientX,clientY:y.clientY};break}const{clientX:g,clientY:b}=y;let I,R=null;if(!g)I=Ee(d);else{I=d.target;try{let D=[];if("composedPath"in d?D=d.composedPath():"path"in d&&d.path.length&&(D=d.path),D.length)for(let x=0;x<D.length;x++){if(D[x].nodeType==9){I=D[x];break}if(R=D[x].getBoundingClientRect(),R.left<g&&g<R.right&&R.top<b&&b<R.bottom){I=D[x];break}}}catch{I=d.target}}if(G(I,o,s,!0))return;const v=n.getId(I);let S=I,C=X({type:P[p],id:v,x:g,y:b},f!==null&&{pointerType:f});if(P[m]===P.Click&&r){let D=null,x=null,H=null,J=null,N=S.closest&&S.closest('a[href],area[href],button,input[type="submit"],input[type="button"]');N||(N=S),N.tagName&&(N.tagName.toLowerCase()==="a"?(N.href&&(D=N.href,x=N.getAttribute("href")),J=N.innerText.substring(0,40)):N.tagName.toLowerCase()==="area"&&N.href?(D=N.href,x=N.getAttribute("href")):N.tagName.toLowerCase()==="button"?J=N.innerText.substring(0,40):N.tagName.toLowerCase()==="input"&&(N.type==="submit"||N.type==="button")?J=N.value.substring(0,40):N.tagName.toLowerCase()==="img"&&(H=N.src)),C=te(X(X(X(X(X({},C),D&&{href:D}),x&&{hrefAttr:x}),H&&{src:H}),J&&{targetText:J}),{targetTagName:S.tagName}),S.classList&&S.classList.length&&(C=te(X({},C),{targetClasses:Array.from(S.classList)})),S!==N&&(C=te(X({},C),{sigTargetTagName:N.tagName}));try{const j=Oe(S,{root:t.body,idName:$e,className:Pe,attr:Er,tagName:Ue});R===null&&(R=S.getBoundingClientRect()),C=te(X({},C),{targetSelector:j,targetW:Math.round(10*R.width)/10,targetH:Math.round(10*R.height)/10,relX:Math.round(10*(g-R.x))/10,relY:Math.round(10*(b-R.y))/10});let O="";try{const E=j.match(/#-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g),L=j.match(/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/g);O=Oe(S,{root:t.body,idName:V=>$e(V)&&(E===null||E.indexOf("#"+V)<0),className:V=>Pe(V)&&(L===null||L.indexOf("."+V)<0),tagName:Ue}),j!==O&&(C=te(X({},C),{altTargetSelector:O}))}catch{}try{const E=I.parentNode.closest("[id]");if(E){let L=Oe(S,{root:E,idName:$e,className:Pe,tagName:Ue});j!==L&&(L=Oe(E,{root:t.body,idName:$e,className:Pe,tagName:Ue})+" "+L,j!==L&&L!==O&&(C=te(X({},C),{byIdTargetSelector:L})))}}catch{}try{const E=Rr(S),L=document.querySelectorAll(E);L.length===1&&L[0]===S&&E.length<500&&j!==E&&E!==O&&(C=te(X({},C),{structuralTargetSelector:E}))}catch{}try{const E=Oe(S,{root:t.body,idName:L=>!L.match(/[0-9]/),className:L=>!idn.match(/[0-9]/)});j!==E&&(C=te(X({},C),{noNumericTargetSelector:E}))}catch{}const oe=/-([a-z])/g,B=E=>E.replace(oe,(L,V)=>V?V.toUpperCase():"");["alt","aria-label","title","placeholder"].forEach(E=>{const L=I.getAttribute(E);if(L&&L.length<40){const V="["+E+'="'+L+'"]',le=document.querySelectorAll(V),ce=B(E)+"AttrSelector";le.length===1&&le[0]===S&&(C[ce]=V)}})}catch{}}switch(P[m]){case P.Click:case P.MouseUp:case P.TouchEnd:if(u){const D=y.pageX-u.pageX,x=y.pageY-u.pageY,H=g-u.clientX,J=b-u.clientY;(D!==0||x!==0||H!==0||J!==0)&&(C=te(X({},C),{pageXDist:D,pageYDist:x,viewportXDist:H,viewportYDist:J}),u=null)}break}T(e)(C)};return Object.keys(P).filter(m=>Number.isNaN(Number(m))&&!m.endsWith("_Departed")&&a[m]!==!1).forEach(m=>{let d=ue(m);const f=h(m);if(window.PointerEvent)switch(P[m]){case P.MouseDown:case P.MouseUp:d=d.replace("mouse","pointer");break;case P.TouchStart:case P.TouchEnd:return}l.push(q(d,f,t))}),T(()=>{l.forEach(m=>m())})}function Kt({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,sampling:s}){const c=T(Me(T(a=>{const l=Ee(a);if(!l||G(l,r,o,!0))return;const i=n.getId(l);if(l===t&&t.defaultView){const u=De(t.defaultView);e({id:i,x:u.left,y:u.top})}else e({id:i,x:l.scrollLeft,y:l.scrollTop})}),s.scroll||100));return q("scroll",c,t)}function xr({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const o=T(Me(T(()=>{const s=nt(),c=rt();(n!==s||r!==c)&&(e({width:Number(c),height:Number(s)}),n=s,r=c)}),200));return q("resize",o,t)}const Dr=["INPUT","TEXTAREA","SELECT"],Qt=new WeakMap;function Ar({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:o,ignoreClass:s,ignoreSelector:c,maskInputOptions:a,maskInputFn:l,sampling:i,userTriggeredOnInput:u}){function h(g){let b=Ee(g);const I=g.isTrusted,R=b&&b.tagName;if(b&&R==="OPTION"&&(b=b.parentElement),!b||!R||Dr.indexOf(R)<0||G(b,r,o,!0)||b.classList.contains(s)||c&&b.matches(c))return;let v=b.value,S=!1;const C=Ze(b)||"";C==="radio"||C==="checkbox"?S=b.checked:(a[R.toLowerCase()]||a[C])&&(v=Je({element:b,maskInputOptions:a,tagName:R,type:C,value:v,maskInputFn:l})),m(b,u?{text:v,isChecked:S,userTriggered:I}:{text:v,isChecked:S});const D=b.name;C==="radio"&&D&&S&&t.querySelectorAll(`input[type="radio"][name="${D}"]`).forEach(x=>{if(x!==b){const H=x.value;m(x,u?{text:H,isChecked:!S,userTriggered:!1}:{text:H,isChecked:!S})}})}function m(g,b){const I=Qt.get(g);if(!I||I.text!==b.text||I.isChecked!==b.isChecked){Qt.set(g,b);const R=n.getId(g);T(e)(te(X({},b),{id:R}))}}const d=(i.input==="last"?["change"]:["input","change"]).map(g=>q(g,T(h),t)),f=t.defaultView;if(!f)return()=>{d.forEach(g=>g())};const p=f.Object.getOwnPropertyDescriptor(f.HTMLInputElement.prototype,"value"),y=[[f.HTMLInputElement.prototype,"value"],[f.HTMLInputElement.prototype,"checked"],[f.HTMLSelectElement.prototype,"value"],[f.HTMLTextAreaElement.prototype,"value"],[f.HTMLSelectElement.prototype,"selectedIndex"],[f.HTMLOptionElement.prototype,"selected"]];return p&&p.set&&d.push(...y.map(g=>xe(g[0],g[1],{set(){T(h)({target:this,isTrusted:!1})}},!1,f))),T(()=>{d.forEach(g=>g())})}function We(e){const t=[];function n(r,o){if(je("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||je("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||je("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||je("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const s=Array.from(r.parentRule.cssRules).indexOf(r);o.unshift(s)}else if(r.parentStyleSheet){const s=Array.from(r.parentStyleSheet.cssRules).indexOf(r);o.unshift(s)}return o}return n(e,t)}function ie(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function _r({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const o=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(o,{apply:T((u,h,m)=>{const[d,f]=m,{id:p,styleId:y}=ie(h,t,n.styleMirror);return(p&&p!==-1||y&&y!==-1)&&e({id:p,styleId:y,adds:[{rule:d,index:f}]}),u.apply(h,m)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:T((u,h,m)=>{const[d]=m,{id:f,styleId:p}=ie(h,t,n.styleMirror);return(f&&f!==-1||p&&p!==-1)&&e({id:f,styleId:p,removes:[{index:d}]}),u.apply(h,m)})});let c;r.CSSStyleSheet.prototype.replace&&(c=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(c,{apply:T((u,h,m)=>{const[d]=m,{id:f,styleId:p}=ie(h,t,n.styleMirror);return(f&&f!==-1||p&&p!==-1)&&e({id:f,styleId:p,replace:d}),u.apply(h,m)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:T((u,h,m)=>{const[d]=m,{id:f,styleId:p}=ie(h,t,n.styleMirror);return(f&&f!==-1||p&&p!==-1)&&e({id:f,styleId:p,replaceSync:d}),u.apply(h,m)})}));const l={};ze("CSSGroupingRule")?l.CSSGroupingRule=r.CSSGroupingRule:(ze("CSSMediaRule")&&(l.CSSMediaRule=r.CSSMediaRule),ze("CSSConditionRule")&&(l.CSSConditionRule=r.CSSConditionRule),ze("CSSSupportsRule")&&(l.CSSSupportsRule=r.CSSSupportsRule));const i={};return Object.entries(l).forEach(([u,h])=>{i[u]={insertRule:h.prototype.insertRule,deleteRule:h.prototype.deleteRule},h.prototype.insertRule=new Proxy(i[u].insertRule,{apply:T((m,d,f)=>{const[p,y]=f,{id:g,styleId:b}=ie(d.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||b&&b!==-1)&&e({id:g,styleId:b,adds:[{rule:p,index:[...We(d),y||0]}]}),m.apply(d,f)})}),h.prototype.deleteRule=new Proxy(i[u].deleteRule,{apply:T((m,d,f)=>{const[p]=f,{id:y,styleId:g}=ie(d.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||g&&g!==-1)&&e({id:y,styleId:g,removes:[{index:[...We(d),p]}]}),m.apply(d,f)})})}),T(()=>{r.CSSStyleSheet.prototype.insertRule=o,r.CSSStyleSheet.prototype.deleteRule=s,c&&(r.CSSStyleSheet.prototype.replace=c),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(l).forEach(([u,h])=>{h.prototype.insertRule=i[u].insertRule,h.prototype.deleteRule=i[u].deleteRule})})}function en({mirror:e,stylesheetManager:t},n){var r,o,s;let c=null;n.nodeName==="#document"?c=e.getId(n):c=e.getId(n.host);const a=n.nodeName==="#document"?(r=n.defaultView)==null?void 0:r.Document:(s=(o=n.ownerDocument)==null?void 0:o.defaultView)==null?void 0:s.ShadowRoot,l=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a?.prototype,"adoptedStyleSheets"):void 0;return c===null||c===-1||!a||!l?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get(){var i;return(i=l.get)==null?void 0:i.call(this)},set(i){var u;const h=(u=l.set)==null?void 0:u.call(this,i);if(c!==null&&c!==-1)try{t.adoptStyleSheets(i,c)}catch{}return h}}),T(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:l.configurable,enumerable:l.enumerable,get:l.get,set:l.set})}))}function Fr({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:o}){const s=o.CSSStyleDeclaration.prototype.setProperty;o.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:T((a,l,i)=>{var u;const[h,m,d]=i;if(n.has(h))return s.apply(l,[h,m,d]);const{id:f,styleId:p}=ie((u=l.parentRule)==null?void 0:u.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||p&&p!==-1)&&e({id:f,styleId:p,set:{property:h,value:m,priority:d},index:We(l.parentRule)}),a.apply(l,i)})});const c=o.CSSStyleDeclaration.prototype.removeProperty;return o.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:T((a,l,i)=>{var u;const[h]=i;if(n.has(h))return c.apply(l,[h]);const{id:m,styleId:d}=ie((u=l.parentRule)==null?void 0:u.parentStyleSheet,t,r.styleMirror);return(m&&m!==-1||d&&d!==-1)&&e({id:m,styleId:d,remove:{property:h},index:We(l.parentRule)}),a.apply(l,i)})}),T(()=>{o.CSSStyleDeclaration.prototype.setProperty=s,o.CSSStyleDeclaration.prototype.removeProperty=c})}function Pr({mediaInteractionCb:e,blockClass:t,blockSelector:n,mirror:r,sampling:o,doc:s}){const c=T(l=>Me(T(i=>{const u=Ee(i);if(!u||G(u,t,n,!0))return;const{currentTime:h,volume:m,muted:d,playbackRate:f}=u;e({type:l,id:r.getId(u),currentTime:h,volume:m,muted:d,playbackRate:f})}),o.media||500)),a=[q("play",c(ve.Play),s),q("pause",c(ve.Pause),s),q("seeked",c(ve.Seeked),s),q("volumechange",c(ve.VolumeChange),s),q("ratechange",c(ve.RateChange),s)];return T(()=>{a.forEach(l=>l())})}function $r({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],o=new WeakMap,s=n.FontFace;n.FontFace=function(a,l,i){const u=new s(a,l,i);return o.set(u,{family:a,buffer:typeof l!="string",descriptors:i,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),u};const c=se(t.fonts,"add",function(a){return function(l){return setTimeout(T(()=>{const i=o.get(l);i&&(e(i),o.delete(l))}),0),a.apply(this,[l])}});return r.push(()=>{n.FontFace=s}),r.push(c),T(()=>{r.forEach(a=>a())})}function Ur(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,selectionCb:s}=e;let c=!0;const a=T(()=>{const l=t.getSelection();if(!l||c&&l?.isCollapsed)return;c=l.isCollapsed||!1;const i=[],u=l.rangeCount||0;for(let h=0;h<u;h++){const m=l.getRangeAt(h),{startContainer:d,startOffset:f,endContainer:p,endOffset:y}=m;G(d,r,o,!0)||G(p,r,o,!0)||i.push({start:n.getId(d),startOffset:f,end:n.getId(p),endOffset:y})}s({ranges:i})});return a(),q("selectionchange",a,t)}function Wr({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:se(n.customElements,"define",function(r){return function(o,s,c){try{t({define:{name:o}})}catch{console.warn(`Custom element callback failed for ${o}`)}return r.apply(this,[o,s,c])}})}function jr(e,t){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:o,scrollCb:s,viewportResizeCb:c,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:i,styleDeclarationCb:u,canvasMutationCb:h,fontCb:m,selectionCb:d,customElementCb:f}=e;e.mutationCb=(...p)=>{t.mutation&&t.mutation(...p),n(...p)},e.mousemoveCb=(...p)=>{t.mousemove&&t.mousemove(...p),r(...p)},e.mouseInteractionCb=(...p)=>{t.mouseInteraction&&t.mouseInteraction(...p),o(...p)},e.scrollCb=(...p)=>{t.scroll&&t.scroll(...p),s(...p)},e.viewportResizeCb=(...p)=>{t.viewportResize&&t.viewportResize(...p),c(...p)},e.inputCb=(...p)=>{t.input&&t.input(...p),a(...p)},e.mediaInteractionCb=(...p)=>{t.mediaInteaction&&t.mediaInteaction(...p),l(...p)},e.styleSheetRuleCb=(...p)=>{t.styleSheetRule&&t.styleSheetRule(...p),i(...p)},e.styleDeclarationCb=(...p)=>{t.styleDeclaration&&t.styleDeclaration(...p),u(...p)},e.canvasMutationCb=(...p)=>{t.canvasMutation&&t.canvasMutation(...p),h(...p)},e.fontCb=(...p)=>{t.font&&t.font(...p),m(...p)},e.selectionCb=(...p)=>{t.selection&&t.selection(...p),d(...p)},e.customElementCb=(...p)=>{t.customElement&&t.customElement(...p),f(...p)}}function zr(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};jr(e,t);let r;e.recordDOM&&(r=Zt(e,e.doc));const o=Nr(e),s=Lr(e),c=Kt(e),a=xr(e,{win:n}),l=Ar(e),i=Pr(e);let u=()=>{},h=()=>{},m=()=>{},d=()=>{};e.recordDOM&&(u=_r(e,{win:n}),h=en(e,e.doc),m=Fr(e,{win:n}),e.collectFonts&&(d=$r(e)));const f=Ur(e),p=Wr(e),y=[];for(const g of e.plugins)y.push(g.observer(g.callback,n,g.options));return T(()=>{de.forEach(g=>g.reset()),r?.disconnect(),o(),s(),c(),a(),l(),i(),u(),h(),m(),d(),f(),p(),y.forEach(g=>g())})}function je(e){return typeof window[e]<"u"}function ze(e){return Boolean(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class tn{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,o){const s=r||this.getIdToRemoteIdMap(t),c=o||this.getRemoteIdToIdMap(t);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),c.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),o=this.getRemoteIdToIdMap(t);return n.map(s=>this.getId(t,s,r,o))}getRemoteId(t,n,r){const o=r||this.getRemoteIdToIdMap(t);return typeof n!="number"?n:o.get(n)||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(o=>this.getRemoteId(t,o,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class Hr{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new tn(Ke),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new tn(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var r;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(r=this.loadListener)==null||r.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const r=this.crossOriginIframeMap.get(t.source);if(!r)return;const o=this.transformCrossOriginEvent(r,n.data.event);o&&this.wrappedEmit(o,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case M.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const o=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,o),this.patchRootIdOnNode(n.data.node,o),{timestamp:n.timestamp,type:M.IncrementalSnapshot,data:{source:k.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case M.Meta:case M.Load:case M.DomContentLoaded:return!1;case M.Plugin:return n;case M.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case M.IncrementalSnapshot:switch(n.data.source){case k.Mutation:return n.data.adds.forEach(o=>{this.replaceIds(o,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(o.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(o.node,s)}),n.data.removes.forEach(o=>{this.replaceIds(o,t,["parentId","id"])}),n.data.attributes.forEach(o=>{this.replaceIds(o,t,["id"])}),n.data.texts.forEach(o=>{this.replaceIds(o,t,["id"])}),n;case k.Drag:case k.TouchMove:case k.MouseMove:return n.data.positions.forEach(o=>{this.replaceIds(o,t,["id"])}),n;case k.ViewportResize:return!1;case k.MediaInteraction:case k.MouseInteraction:case k.Scroll:case k.CanvasMutation:case k.Input:return this.replaceIds(n.data,t,["id"]),n;case k.StyleSheetRule:case k.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case k.Font:return n;case k.Selection:return n.data.ranges.forEach(o=>{this.replaceIds(o,t,["start","end"])}),n;case k.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)==null||r.forEach(o=>{this.replaceStyleIds(o,t,["styleId"])}),n}}return!1}replace(t,n,r,o){for(const s of o)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=t.getIds(r,n[s]):n[s]=t.getId(r,n[s]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Ft.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}var Br=Object.defineProperty,Vr=Object.defineProperties,qr=Object.getOwnPropertyDescriptors,nn=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,Xr=Object.prototype.propertyIsEnumerable,rn=(e,t,n)=>t in e?Br(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,on=(e,t)=>{for(var n in t||(t={}))Gr.call(t,n)&&rn(e,n,t[n]);if(nn)for(var n of nn(t))Xr.call(t,n)&&rn(e,n,t[n]);return e},sn=(e,t)=>Vr(e,qr(t));class Yr{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Ie(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=Zt(sn(on({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Kt(sn(on({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(en({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(se(t.prototype,"attachShadow",function(o){return function(s){const c=o.call(this,s);return this.shadowRoot&&_t(this)&&r.addShadowRoot(this.shadowRoot,n),c}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var we="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Jr=typeof Uint8Array>"u"?[]:new Uint8Array(256),He=0;He<we.length;He++)Jr[we.charCodeAt(He)]=He;var an=function(e){var t=new Uint8Array(e),n,r=t.length,o="";for(n=0;n<r;n+=3)o+=we[t[n]>>2],o+=we[(t[n]&3)<<4|t[n+1]>>4],o+=we[(t[n+1]&15)<<2|t[n+2]>>6],o+=we[t[n+2]&63];return r%3===2?o=o.substring(0,o.length-1)+"=":r%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const ln=new Map;function Zr(e,t){let n=ln.get(e);return n||(n=new Map,ln.set(e,n)),n.has(t)||n.set(t,[]),n.get(t)}const cn=(e,t,n)=>{if(!e||!(dn(e,t)||typeof e=="object"))return;const r=e.constructor.name,o=Zr(n,r);let s=o.indexOf(e);return s===-1&&(s=o.length,o.push(e)),s};function Be(e,t,n){if(e instanceof Array)return e.map(r=>Be(r,t,n));if(e===null)return e;if(e instanceof Float32Array||e instanceof Float64Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Int8Array||e instanceof Uint8ClampedArray)return{rr_type:e.constructor.name,args:[Object.values(e)]};if(e instanceof ArrayBuffer){const r=e.constructor.name,o=an(e);return{rr_type:r,base64:o}}else{if(e instanceof DataView)return{rr_type:e.constructor.name,args:[Be(e.buffer,t,n),e.byteOffset,e.byteLength]};if(e instanceof HTMLImageElement){const r=e.constructor.name,{src:o}=e;return{rr_type:r,src:o}}else if(e instanceof HTMLCanvasElement){const r="HTMLImageElement",o=e.toDataURL();return{rr_type:r,src:o}}else{if(e instanceof ImageData)return{rr_type:e.constructor.name,args:[Be(e.data,t,n),e.width,e.height]};if(dn(e,t)||typeof e=="object"){const r=e.constructor.name,o=cn(e,t,n);return{rr_type:r,index:o}}}}return e}const un=(e,t,n)=>e.map(r=>Be(r,t,n)),dn=(e,t)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(r=>typeof t[r]=="function");return Boolean(n.find(r=>e instanceof t[r]))};function Kr(e,t,n,r){const o=[],s=Object.getOwnPropertyNames(t.CanvasRenderingContext2D.prototype);for(const c of s)try{if(typeof t.CanvasRenderingContext2D.prototype[c]!="function")continue;const a=se(t.CanvasRenderingContext2D.prototype,c,function(l){return function(...i){return G(this.canvas,n,r,!0)||setTimeout(()=>{const u=un(i,t,this);e(this.canvas,{type:Se["2D"],property:c,args:u})},0),l.apply(this,i)}});o.push(a)}catch{const l=xe(t.CanvasRenderingContext2D.prototype,c,{set(i){e(this.canvas,{type:Se["2D"],property:c,args:[i],setter:!0})}});o.push(l)}return()=>{o.forEach(c=>c())}}function Qr(e){return e==="experimental-webgl"?"webgl":e}function pn(e,t,n,r){const o=[];try{const s=se(e.HTMLCanvasElement.prototype,"getContext",function(c){return function(a,...l){if(!G(this,t,n,!0)){const i=Qr(a);if("__context"in this||(this.__context=i),r&&["webgl","webgl2"].includes(i))if(l[0]&&typeof l[0]=="object"){const u=l[0];u.preserveDrawingBuffer||(u.preserveDrawingBuffer=!0)}else l.splice(0,1,{preserveDrawingBuffer:!0})}return c.apply(this,[a,...l])}});o.push(s)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{o.forEach(s=>s())}}function hn(e,t,n,r,o,s,c){const a=[],l=Object.getOwnPropertyNames(e);for(const i of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(i))try{if(typeof e[i]!="function")continue;const u=se(e,i,function(h){return function(...m){const d=h.apply(this,m);if(cn(d,c,this),"tagName"in this.canvas&&!G(this.canvas,r,o,!0)){const f=un(m,c,this),p={type:t,property:i,args:f};n(this.canvas,p)}return d}});a.push(u)}catch{const h=xe(e,i,{set(m){n(this.canvas,{type:t,property:i,args:[m],setter:!0})}});a.push(h)}return a}function eo(e,t,n,r,o){const s=[];return s.push(...hn(t.WebGLRenderingContext.prototype,Se.WebGL,e,n,r,o,t)),typeof t.WebGL2RenderingContext<"u"&&s.push(...hn(t.WebGL2RenderingContext.prototype,Se.WebGL2,e,n,r,o,t)),()=>{s.forEach(c=>c())}}function to(e,t){var n=t===void 0?null:t,r=e.toString(),o=r.split(`
`);o.pop(),o.shift();for(var s=o[0].search(/\S/),c=/(['"])__worker_loader_strict__(['"])/g,a=0,l=o.length;a<l;++a)o[a]=o[a].substring(s).replace(c,"$1use strict$2")+`
`;return n&&o.push("//# sourceMappingURL="+n+`
`),o}function no(e,t){var n=to(e,t),r=new Blob(n,{type:"application/javascript"});return URL.createObjectURL(r)}function ro(e,t){var n;return function(o){return n=n||no(e,t),new Worker(n,o)}}var oo=ro(function(){(function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=typeof Uint8Array>"u"?[]:new Uint8Array(256),n=0;n<e.length;n++)t[e.charCodeAt(n)]=n;var r=function(l){var i=new Uint8Array(l),u,h=i.length,m="";for(u=0;u<h;u+=3)m+=e[i[u]>>2],m+=e[(i[u]&3)<<4|i[u+1]>>4],m+=e[(i[u+1]&15)<<2|i[u+2]>>6],m+=e[i[u+2]&63];return h%3===2?m=m.substring(0,m.length-1)+"=":h%3===1&&(m=m.substring(0,m.length-2)+"=="),m};const o=new Map,s=new Map;async function c(l,i,u){const h=`${l}-${i}`;if("OffscreenCanvas"in globalThis){if(s.has(h))return s.get(h);const m=new OffscreenCanvas(l,i);m.getContext("2d");const d=await(await m.convertToBlob(u)).arrayBuffer(),f=r(d);return s.set(h,f),f}else return""}const a=self;a.onmessage=async function(l){if("OffscreenCanvas"in globalThis){const{id:i,bitmap:u,width:h,height:m,dataURLOptions:d}=l.data,f=c(h,m,d),p=new OffscreenCanvas(h,m);p.getContext("2d").drawImage(u,0,0),u.close();const y=await p.convertToBlob(d),g=y.type,b=await y.arrayBuffer(),I=r(b);if(!o.has(i)&&await f===I)return o.set(i,I),a.postMessage({id:i});if(o.get(i)===I)return a.postMessage({id:i});a.postMessage({id:i,type:g,base64:I,width:h,height:m}),o.set(i,I)}else return a.postMessage({id:l.data.id})}})()},null),mn=Object.getOwnPropertySymbols,so=Object.prototype.hasOwnProperty,ao=Object.prototype.propertyIsEnumerable,io=(e,t)=>{var n={};for(var r in e)so.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&mn)for(var r of mn(e))t.indexOf(r)<0&&ao.call(e,r)&&(n[r]=e[r]);return n},lo=(e,t,n)=>new Promise((r,o)=>{var s=l=>{try{a(n.next(l))}catch(i){o(i)}},c=l=>{try{a(n.throw(l))}catch(i){o(i)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,c);a((n=n.apply(e,t)).next())});class co{constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(l,i)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(l)||this.pendingCanvasMutations.set(l,[]),this.pendingCanvasMutations.get(l).push(i)};const{sampling:n="all",win:r,blockClass:o,blockSelector:s,recordCanvas:c,dataURLOptions:a}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,c&&n==="all"&&this.initCanvasMutationObserver(r,o,s),c&&typeof n=="number"&&this.initCanvasFPSObserver(n,r,o,s,{dataURLOptions:a})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(t,n,r,o,s){const c=pn(n,r,o,!0),a=new Map,l=new oo;l.onmessage=f=>{const{id:p}=f.data;if(a.set(p,!1),!("base64"in f.data))return;const{base64:y,type:g,width:b,height:I}=f.data;this.mutationCb({id:p,type:Se["2D"],commands:[{property:"clearRect",args:[0,0,b,I]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:y}],type:g}]},0,0]}]})};const i=1e3/t;let u=0,h;const m=()=>{const f=[];return n.document.querySelectorAll("canvas").forEach(p=>{G(p,r,o,!0)||f.push(p)}),f},d=f=>{if(u&&f-u<i){h=requestAnimationFrame(d);return}u=f,m().forEach(p=>lo(this,null,function*(){var y;const g=this.mirror.getId(p);if(a.get(g))return;if(a.set(g,!0),["webgl","webgl2"].includes(p.__context)){const I=p.getContext(p.__context);((y=I?.getContextAttributes())==null?void 0:y.preserveDrawingBuffer)===!1&&I.clear(I.COLOR_BUFFER_BIT)}const b=yield createImageBitmap(p);l.postMessage({id:g,bitmap:b,width:p.width,height:p.height,dataURLOptions:s.dataURLOptions},[b])})),h=requestAnimationFrame(d)};h=requestAnimationFrame(d),this.resetObservers=()=>{c(),cancelAnimationFrame(h)}}initCanvasMutationObserver(t,n,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const o=pn(t,n,r,!1),s=Kr(this.processMutation.bind(this),t,n,r),c=eo(this.processMutation.bind(this),t,n,r,this.mirror);this.resetObservers=()=>{o(),s(),c()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const t=n=>{this.rafStamps.latestId=n,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((t,n)=>{const r=this.mirror.getId(n);this.flushPendingCanvasMutationFor(n,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(t,n){if(this.frozen||this.locked)return;const r=this.pendingCanvasMutations.get(t);if(!r||n===-1)return;const o=r.map(c=>io(c,["type"])),{type:s}=r[0];this.mutationCb({id:n,type:s,commands:o}),this.pendingCanvasMutations.delete(t)}}class uo{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new nr,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},o=[];for(const s of t){let c;this.styleMirror.has(s)?c=this.styleMirror.getId(s):(c=this.styleMirror.add(s),o.push({styleId:c,rules:Array.from(s.rules||CSSRule,(a,l)=>({rule:St(a),index:l}))})),r.styleIds.push(c)}o.length>0&&(r.styles=o),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class po{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(o=>o!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}var fn=(e,t,n)=>new Promise((r,o)=>{var s=l=>{try{a(n.next(l))}catch(i){o(i)}},c=l=>{try{a(n.throw(l))}catch(i){o(i)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,c);a((n=n.apply(e,t)).next())});class ho{constructor(t){this.urlObjectMap=new Map,this.capturedURLs=new Set,this.capturingURLs=new Set,this.failedURLs=new Set,this.resetHandlers=[];const{win:n}=t;this.mutationCb=t.mutationCb,this.config=t.captureAssets;const r=this.urlObjectMap;if(this.config.objectURLs){try{const o=se(n.URL,"createObjectURL",function(s){return function(c){const a=s.apply(this,[c]);return r.set(a,c),a}});this.resetHandlers.push(o)}catch{console.error("failed to patch URL.createObjectURL")}try{const o=se(n.URL,"revokeObjectURL",function(s){return function(c){return r.delete(c),s.apply(this,[c])}});this.resetHandlers.push(o)}catch{console.error("failed to patch URL.revokeObjectURL")}}}reset(){this.urlObjectMap.clear(),this.capturedURLs.clear(),this.capturingURLs.clear(),this.failedURLs.clear(),this.resetHandlers.forEach(t=>t())}shouldIgnore(t){const n=["data:"];if(t.startsWith(`blob:${window.location.origin}/`))return!this.config.objectURLs;for(const o of n)if(t.startsWith(o))return!0;const r=this.config.origins;if(typeof r=="boolean")return!r;if(Array.isArray(r)){const o=new URL(t).origin;return!r.includes(o)}return!1}getURLObject(t){return fn(this,null,function*(){const n=this.urlObjectMap.get(t);if(n)return n;try{return yield(yield fetch(t)).blob()}catch(r){throw console.warn(`getURLObject failed for ${t}`),r}})}capture(t){return this.shouldIgnore(t)?{status:"refused"}:this.capturedURLs.has(t)?{status:"captured"}:this.capturingURLs.has(t)?{status:"capturing"}:this.failedURLs.has(t)?{status:"error"}:(this.capturingURLs.add(t),this.getURLObject(t).then(n=>fn(this,null,function*(){if(n){let r;if(n instanceof File||n instanceof Blob){const o=yield n.arrayBuffer(),s=an(o);r={rr_type:"Blob",type:n.type,data:[{rr_type:"ArrayBuffer",base64:s}]},this.capturedURLs.add(t),this.capturingURLs.delete(t),this.mutationCb({url:t,payload:r})}}})).catch(n=>{let r="";n instanceof Error?r=n.message:typeof n=="string"?r=n:n&&typeof n=="object"&&"toString"in n&&(r=n.toString()),this.mutationCb({url:t,failed:{message:r}}),this.failedURLs.add(t),this.capturingURLs.delete(t)}),{status:"capturing"})}isAttributeCacheable(t,n){return Ct(t,n)}}var mo=Object.defineProperty,fo=Object.defineProperties,go=Object.getOwnPropertyDescriptors,gn=Object.getOwnPropertySymbols,yo=Object.prototype.hasOwnProperty,bo=Object.prototype.propertyIsEnumerable,yn=(e,t,n)=>t in e?mo(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Y=(e,t)=>{for(var n in t||(t={}))yo.call(t,n)&&yn(e,n,t[n]);if(gn)for(var n of gn(t))bo.call(t,n)&&yn(e,n,t[n]);return e},So=(e,t)=>fo(e,go(t));function U(e){return"timestamp"in e?e:So(Y({},e),{timestamp:be()})}let $,pt,Ve,ht,qe,Ge=!1;const ee=En();function re(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:s=null,ignoreClass:c="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:i=null,inlineStylesheet:u=!0,maskAllInputs:h,maskInputOptions:m,slimDOMOptions:d,maskInputFn:f,maskTextFn:p,hooks:y,packFn:g,sampling:b={},dataURLOptions:I={},mousemoveWait:R,recordDOM:v=!0,triangulateClicks:S=!1,recordCanvas:C=!1,recordCrossOriginIframes:D=!1,recordAfter:x=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:H=!1,collectFonts:J=!1,inlineImages:N=!1,captureAssets:j={objectURLs:!0,origins:!1},plugins:O,keepIframeSrcFn:oe=()=>!1,ignoreCSSAttributes:B=new Set([]),errorHandler:E}=e;N&&(j.objectURLs=!0,j.origins=!0),lr(E);const L=D?window.parent===window:!0;let V=!1;if(!L)try{window.parent.document&&(V=!1)}catch{V=!0}if(L&&!t)throw new Error("emit function is required");const le=tt(),ce=le.document;R!==void 0&&b.mousemove===void 0&&(b.mousemove=R),ee.reset();const mt=h===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:m!==void 0?m:{password:!0},ft=d===!0||d==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMismatchedMedia:!0,headMetaAuthorship:d==="all",headMetaDescKeywords:d==="all",headTitleMutations:d==="all",adPlaceholder:d==="all"}:d||{};tr();let bn,gt=0;const Sn=w=>{for(const Z of O||[])Z.eventProcessor&&(w=Z.eventProcessor(w));return g&&!V&&(w=g(w)),w};$=(w,Z)=>{var _;if(Fe&&Fe(w.timestamp),((_=de[0])==null?void 0:_.isFrozen())&&w.type!==M.FullSnapshot&&!(w.type===M.IncrementalSnapshot&&w.data.source===k.Mutation)&&!(w.type===M.Custom&&w.data.tag==="window-hidden")){let z=w.timestamp,K=w.data;"positions"in K&&K.positions[0].timeOffset&&(z+=K.positions[0].timeOffset),de.forEach(F=>F.unfreeze(z))}if(L)t?.(Sn(w),Z);else if(V){const z={type:"rrweb",event:Sn(w),origin:window.location.origin,isCheckout:Z};window.parent.postMessage(z,"*")}if(w.type===M.FullSnapshot)bn=w,gt=0;else if(w.type===M.IncrementalSnapshot){if(w.data.source===k.Mutation&&w.data.isAttachIframe)return;gt++;const z=r&&gt>=r,K=n&&w.timestamp-bn.timestamp>n;(z||K)&&Ve(!0)}};const Xe=(w,Z)=>{const _={type:M.IncrementalSnapshot,data:Y({source:k.Mutation},w)};$(U(typeof Z<"u"?Y({timestamp:Z},_):_))},vn=w=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.Scroll},w)})),wn=w=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.CanvasMutation},w)})),vo=w=>$(U({type:M.Asset,data:w})),wo=w=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.AdoptedStyleSheet},w)})),pe=new uo({mutationCb:Xe,adoptedStyleSheetCb:wo}),he=new Hr({mirror:ee,mutationCb:Xe,stylesheetManager:pe,recordCrossOriginIframes:D,wrappedEmit:$});for(const w of O||[])w.getMirror&&w.getMirror({nodeMirror:ee,crossOriginIframeMirror:he.crossOriginIframeMirror,crossOriginIframeStyleMirror:he.crossOriginIframeStyleMirror});const yt=new po;ht=new co({recordCanvas:C,mutationCb:wn,win:window,blockClass:o,blockSelector:s,mirror:ee,sampling:b.canvas,dataURLOptions:I}),qe=new ho({mutationCb:vo,win:window,captureAssets:j});const Ye=new Yr({mutationCb:Xe,scrollCb:vn,bypassOptions:{blockClass:o,blockSelector:s,maskTextClass:l,maskTextSelector:i,inlineStylesheet:u,maskInputOptions:mt,dataURLOptions:I,maskTextFn:p,maskInputFn:f,recordCanvas:C,sampling:b,slimDOMOptions:ft,iframeManager:he,stylesheetManager:pe,canvasManager:ht,keepIframeSrcFn:oe,processedNodeManager:yt,assetManager:qe},mirror:ee});Ve=(w=!1)=>{if(!v)return;$(U({type:M.Meta,data:{href:le.location.href,width:rt(),height:nt(),devicePixelRatio:window.devicePixelRatio,pointerFine:matchMedia("(pointer:fine)").matches,initialOffset:De(le),captureAssets:j}}),w),pe.reset(),Ye.init(),de.forEach(_=>_.lock());const Z=Kn(ce,{mirror:ee,blockClass:o,blockSelector:s,maskTextClass:l,maskTextSelector:i,inlineStylesheet:u,maskAllInputs:mt,maskTextFn:p,slimDOM:ft,dataURLOptions:I,recordCanvas:C,onSerialize:_=>{xt(_,ee)&&he.addIframe(_),Dt(_,ee)&&pe.trackLinkElement(_),at(_)&&Ye.addShadowRoot(_.shadowRoot,ce)},onIframeLoad:(_,z)=>{he.attachIframe(_,z),Ye.observeAttachShadow(_)},onStylesheetLoad:(_,z)=>{pe.attachLinkElement(_,z)},onAssetDetected:_=>{_.urls.forEach(z=>{qe.capture(z)})},keepIframeSrcFn:oe});if(!Z)return console.warn("Failed to snapshot the document");$(U({type:M.FullSnapshot,data:{node:Z,initialOffset:De(le)}}),w),de.forEach(_=>_.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&pe.adoptStyleSheets(document.adoptedStyleSheets,ee.getId(document))};try{const w=[],Z=z=>{var K;return T(zr)({mutationCb:Xe,mousemoveCb:(F,bt,Co)=>$(U({type:M.IncrementalSnapshot,data:{source:bt,positions:F},timestamp:Co})),mouseInteractionCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.MouseInteraction},F)})),scrollCb:vn,viewportResizeCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.ViewportResize},F)})),inputCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.Input},F)})),mediaInteractionCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.MediaInteraction},F)})),styleSheetRuleCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.StyleSheetRule},F)})),styleDeclarationCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.StyleDeclaration},F)})),canvasMutationCb:wn,fontCb:F=>$(U({type:M.IncrementalSnapshot,data:Y({source:k.Font},F)})),selectionCb:F=>{$(U({type:M.IncrementalSnapshot,data:Y({source:k.Selection},F)}))},customElementCb:F=>{$(U({type:M.IncrementalSnapshot,data:Y({source:k.CustomElement},F)}))},blockClass:o,ignoreClass:c,ignoreSelector:a,maskTextClass:l,maskTextSelector:i,maskInputOptions:mt,inlineStylesheet:u,sampling:b,recordDOM:v,triangulateClicks:S,recordCanvas:C,userTriggeredOnInput:H,collectFonts:J,doc:z,maskInputFn:f,maskTextFn:p,keepIframeSrcFn:oe,blockSelector:s,slimDOMOptions:ft,dataURLOptions:I,mirror:ee,iframeManager:he,stylesheetManager:pe,shadowDomManager:Ye,processedNodeManager:yt,canvasManager:ht,assetManager:qe,ignoreCSSAttributes:B,plugins:((K=O?.filter(F=>F.observer))==null?void 0:K.map(F=>({observer:F.observer,options:F.options,callback:bt=>$(U({type:M.Plugin,data:{plugin:F.name,payload:bt}}))})))||[]},y)};he.addLoadListener(z=>{try{w.push(Z(z.contentDocument))}catch(K){console.warn(K)}});const _=()=>{Ve(),w.push(Z(ce)),Ge=!0};return ce.readyState==="interactive"||ce.readyState==="complete"?_():(w.push(q("DOMContentLoaded",()=>{$(U({type:M.DomContentLoaded,data:{}})),x==="DOMContentLoaded"&&_()},ce)),w.push(q("load",()=>{$(U({type:M.Load,data:{}})),x==="load"&&_()},le))),pt=function(z){w.forEach(K=>K()),yt.destroy(),Ge=!1,cr(),z&&Qn()},pt}catch(w){console.warn(w)}}return re.addCustomEvent=(e,t)=>{if(!Ge)throw new Error("please add custom event after start recording");$(U({type:M.Custom,data:{tag:e,payload:t}}))},re.freezePage=()=>{de.forEach(e=>e.freeze())},re.takeFullSnapshot=e=>{if(!Ge)throw new Error("please take full snapshot after start recording");Ve(e)},re.stop=(e=!0)=>{pt(e)},re.getWindowWidth=rt,re.getWindowHeight=nt,re.getWindowScroll=De,re.mirror=ee,re}();

